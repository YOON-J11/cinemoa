<link rel="stylesheet" href="/css/movie.css" />
{{> common/header }}
<div class="container movie">
    <h1>영화 목록</h1>
    <a href="/movies/new">등록하기</a>

    <!-- 상영 상태별 필터링 버튼 추가 -->
    <div class="status-tab">
        <a href="/movies">전체</a>
        <a href="/movies?status=NOW_SHOWING">개봉중</a>
        <a href="/movies?status=COMING_SOON">상영예정</a>
        <a href="/movies?status=NOT_SHOWING">상영안함</a>
    </div>

    <div class="movie-list">
        {{#movies.content}}
            <div class="item">
                <div>
                    {{#mainImageUrl}}
                        <img src="/images/movie/{{mainImageUrl}}" alt="{{title}}">
                    {{/mainImageUrl}}
                    {{^mainImageUrl}}
                        <div>이미지 없음</div>
                    {{/mainImageUrl}}
                    <div>
                        <h5>{{title}}</h5>

                        <!-- 상영 상태 배지 추가 -->
                        {{#isNowShowing}}
                            <span>개봉중</span>
                        {{/isNowShowing}}
                        {{#isComingSoon}}
                            <span>상영예정</span>
                        {{/isComingSoon}}
                        {{#isNotShowing}}
                            <span>상영안함</span>
                        {{/isNotShowing}}

                        <p>
                            <small>
                                <!-- 관람등급 추가 -->
                                {{#ageRating}}
                                    <span class="badge bg-info">관람등급 {{ageRating}}</span>
                                {{/ageRating}}
                                <span>{{genre}}</span>
                                {{#releaseDate}}{{releaseDate}} 개봉{{/releaseDate}}
                            </small>
                        </p>
                        <p>
                            <span>★</span> {{rating}} | 예매율: {{reservationRate}}% | 관객수: {{audienceCount}}명
                        </p>
                        <div>
                            <span><i></i> {{likesCount}}</span>
                            <span><i></i> {{reviewCount}}</span>
                        </div>
                        <a href="/movies/{{movieId}}">상세보기</a>
                    </div>
                </div>
            </div>
        {{/movies.content}}
    </div>

    <!-- 페이지네이션 -->
    <nav>
        <ul>
            <li>
                <a href="?page={{prevPage}}">
                <span>&laquo;</span>
                </a>
            </li>
            {{#pageNumbers}}
                <li>
                    <a href="?page={{number}}">{{number}}</a>
                </li>
            {{/pageNumbers}}
            <li>
                <a href="?page={{nextPage}}">
                <span>&raquo;</span>
                </a>
            </li>
        </ul>
    </nav>
</div>
{{> common/footer }}